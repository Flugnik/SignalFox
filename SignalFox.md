**SignalFox.**

**–û–∫, –Ω–∞—á–Ω—ë–º —Å –ø–µ—Ä–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ (–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∞–∫—Ü–∏—è–º).**

---

## **‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è**

**–ë–ª–æ–∫–∏:**

1. **–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:**

   * **TradingView (—á–µ—Ä–µ–∑ Playwright –∏–ª–∏ API/—Å–∫—Ä–µ–π–ø–∏–Ω–≥).**

   * **–°–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ä–æ–≤ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `tickers.json` –∏–ª–∏ –≤ –±–∞–∑–µ.**

2. **–ü–∞—Ä—Å–µ—Ä –¥–∞–Ω–Ω—ã—Ö:**

   * **–ü–æ–ª—É—á–∞–µ–º OHLC –¥–∞–Ω–Ω—ã–µ (open, high, low, close) –∑–∞ N —Å–≤–µ—á–µ–π.**

   * **–°—á–∏—Ç–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:**

     * **MA(5), MA(21), MA(252)**

     * **ADX**

     * **–°—Ç–æ—Ö–∞—Å—Ç–∏–∫ (14,3,3)**

3. **–ê–ª–≥–æ—Ä–∏—Ç–º —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (—Ñ–∏–ª—å—Ç—Ä):**

   * **–ö—Ä–æ—Å—Å MA5 –∏ MA21, —Ü–µ–Ω–∞ –≤—ã—à–µ MA252 ‚Üí —Å–∏–≥–Ω–∞–ª –Ω–∞ –ø–æ–∫—É–ø–∫—É.**

   * **ADX \> 25 ‚Üí —Ç—Ä–µ–Ω–¥ –µ—Å—Ç—å.**

   * **–°—Ç–æ—Ö–∞—Å—Ç–∏–∫ \<20 (–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å) –∏–ª–∏ \>80 (–ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å).**

   * **–°–≤–µ—á–Ω–æ–π –ø–∞—Ç—Ç–µ—Ä–Ω ‚Üí Hammer, Engulfing –∏ —Ç.–¥.**

4. **LLM-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:**

   * **–¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Å–∏–≥–Ω–∞–ª ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–æ—è—Å–Ω–µ–Ω–∏–µ (–Ω–∞ –æ—Å–Ω–æ–≤–µ —á–∏—Å–µ–ª, –Ω–µ —Å–∫—Ä–∏–Ω–æ–≤).**

5. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram:**

**–°–∫—Ä–∏–Ω TradingView \+ —Ç–µ–∫—Å—Ç:**

 **üü¢ –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞: SBER**    
**MA5 –ø–µ—Ä–µ—Å–µ–∫–ª–∞ MA21 —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö, ADX=28, –°—Ç–æ—Ö–∞—Å—Ç–∏–∫=15**    
**–°–≤–µ—á–Ω–æ–π –ø–∞—Ç—Ç–µ—Ä–Ω: Hammer**  

*   
6. **–ó–∞–ø—É—Å–∫:**

   * **GitHub Actions –∏–ª–∏ VPS cron ‚Üí 1 —Ä–∞–∑ –≤ –¥–µ–Ω—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, 18:50 –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º –ú–æ—Å–±–∏—Ä–∂–∏).**

---

## **‚úÖ –ü–æ—á–µ–º—É –ª—É—á—à–µ –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –∞–Ω–∞–ª–∏–∑–∞ —Å–∫—Ä–∏–Ω–æ–≤ LLM**

* **–ú–µ–¥–ª–µ–Ω–Ω–æ –∏ –¥–æ—Ä–æ–≥–æ.**

* **–û—à–∏–±–∫–∏ –ø—Ä–∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏.**

* **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø—Ä–æ—â–µ —Å—á–∏—Ç–∞—Ç—å –≤ Python (TA-Lib, pandas-ta).**

---

## **‚úÖ –ü—Ä–∏–º–µ—Ä –ø–∞–π–ø–ª–∞–π–Ω–∞ (Python)**

### **1\. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏**

**pip install playwright pandas pandas-ta requests python-telegram-bot**

### **2\. –õ–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö**

**import pandas as pd**  
**import pandas\_ta as ta**  
**import requests**

**def get\_stock\_data(ticker: str, interval="1d", limit=300):**  
    **url \= f"https://api.twelvedata.com/time\_series?symbol={ticker}.ME\&interval={interval}\&apikey=YOUR\_KEY\&outputsize={limit}"**  
    **response \= requests.get(url).json()**  
    **df \= pd.DataFrame(response\['values'\])**  
    **df\['datetime'\] \= pd.to\_datetime(df\['datetime'\])**  
    **df \= df.astype({'open': 'float', 'high': 'float', 'low': 'float', 'close': 'float'})**  
    **return df.sort\_values('datetime')**

### **3\. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã**

**def add\_indicators(df):**  
    **df\['MA5'\] \= df\['close'\].rolling(5).mean()**  
    **df\['MA21'\] \= df\['close'\].rolling(21).mean()**  
    **df\['MA252'\] \= df\['close'\].rolling(252).mean()**  
    **df\['ADX'\] \= ta.adx(df\['high'\], df\['low'\], df\['close'\], length=14)\['ADX\_14'\]**  
    **stoch \= ta.stoch(df\['high'\], df\['low'\], df\['close'\], k=14, d=3)**  
    **df\['STOCH\_K'\] \= stoch\['STOCHk\_14\_3\_3'\]**  
    **df\['STOCH\_D'\] \= stoch\['STOCHd\_14\_3\_3'\]**  
    **return df**

### **4\. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–≥–Ω–∞–ª–∞**

**def check\_signal(df):**  
    **last \= df.iloc\[-1\]**  
    **signal \= \[\]**  
    **if last\['MA5'\] \> last\['MA21'\] and last\['close'\] \> last\['MA252'\]:**  
        **if last\['ADX'\] \> 25:**  
            **if last\['STOCH\_K'\] \< 20:**  
                **signal.append("–ü–æ–∫—É–ø–∫–∞ (–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å)")**  
            **elif last\['STOCH\_K'\] \> 80:**  
                **signal.append("–û—Å—Ç–æ—Ä–æ–∂–Ω–æ: –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å")**  
    **return signal**

### **5\. Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ**

**from telegram import Bot**

**TOKEN \= "YOUR\_TELEGRAM\_BOT\_TOKEN"**  
**CHAT\_ID \= "YOUR\_CHAT\_ID"**  
**bot \= Bot(token=TOKEN)**

**def send\_alert(ticker, signal):**  
    **message \= f"üü¢ {ticker} —Å–∏–≥–Ω–∞–ª: {', '.join(signal)}"**  
    **bot.send\_message(chat\_id=CHAT\_ID, text=message)**

### **6\. –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç**

**tickers \= \["SBER", "GAZP", "LKOH"\]**

**for t in tickers:**  
    **df \= get\_stock\_data(t)**  
    **df \= add\_indicators(df)**  
    **signals \= check\_signal(df)**  
    **if signals:**  
        **send\_alert(t, signals)**

---

## **‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**

* **–î–ª—è —Å–≤–µ—á–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ ‚Üí `ta.cdl_pattern` (TA-Lib).**

* **–î–ª—è –≥—Ä–∞—Ñ–∏–∫–∞ ‚Üí matplotlib \+ `bot.send_photo()`.**

* **LLM –ø–æ–¥–∫–ª—é—á–∏–º –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —á–∏—Å–µ–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, GPT —á–µ—Ä–µ–∑ OpenAI API).**

---

**–û—Ç–ª–∏—á–Ω–æ\! –î–ª—è —Å–≤–µ—á–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º TA-Lib (–≤ –Ω—ë–º –µ—Å—Ç—å –≥–æ—Ç–æ–≤—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, `CDL_HAMMER`, `CDL_ENGULFING` –∏ –µ—â—ë –æ–∫–æ–ª–æ 60 –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤).**

---

## **‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ TA-Lib**

**–î–ª—è Linux:**

**sudo apt-get install libta-lib0 libta-lib0-dev**

**pip install TA-Lib**

**–î–ª—è Windows:**

* **–°–∫–∞—á–∞—Ç—å –±–∏–Ω–∞—Ä—å —Å [TA-Lib.org](https://www.ta-lib.org/hdr_dw.html)**

* **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å, –ø–æ—Ç–æ–º:**

**pip install TA-Lib**

---

## **‚úÖ –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–¥**

### **1\. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º TA-Lib**

**import talib as ta**

---

### **2\. –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–≤–µ—á–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤**

**–î–æ–±–∞–≤–∏–º –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π:**

* **Hammer (–º–æ–ª–æ—Ç)**

* **Engulfing (–ø–æ–≥–ª–æ—â–µ–Ω–∏–µ)**

* **Doji (–Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç—å)**

* **Morning Star (–±—ã—á–∏–π —Ä–∞–∑–≤–æ—Ä–æ—Ç)**

**def detect\_candlestick\_patterns(df):**

    **patterns \= \[\]**

    **hammer \= ta.CDLHAMMER(df\['open'\], df\['high'\], df\['low'\], df\['close'\])**

    **engulfing \= ta.CDLENGULFING(df\['open'\], df\['high'\], df\['low'\], df\['close'\])**

    **doji \= ta.CDLDOJI(df\['open'\], df\['high'\], df\['low'\], df\['close'\])**

    **morning\_star \= ta.CDLMORNINGSTAR(df\['open'\], df\['high'\], df\['low'\], df\['close'\])**

    **if hammer.iloc\[-1\] \!= 0:**

        **patterns.append("Hammer (–º–æ–ª–æ—Ç)")**

    **if engulfing.iloc\[-1\] \!= 0:**

        **patterns.append("Engulfing (–ø–æ–≥–ª–æ—â–µ–Ω–∏–µ)")**

    **if doji.iloc\[-1\] \!= 0:**

        **patterns.append("Doji (–Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç—å)")**

    **if morning\_star.iloc\[-1\] \!= 0:**

        **patterns.append("Morning Star (–±—ã—á–∏–π —Ä–∞–∑–≤–æ—Ä–æ—Ç)")**

    **return patterns**

---

### **3\. –û–±–Ω–æ–≤–ª—è–µ–º –ª–æ–≥–∏–∫—É —Å–∏–≥–Ω–∞–ª–∞**

**–¢–µ–ø–µ—Ä—å —Å–∏–≥–Ω–∞–ª –±—É–¥–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã, –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:**

**def check\_signal(df):**

    **last \= df.iloc\[-1\]**

    **signal \= \[\]**

    **\# –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã**

    **if last\['MA5'\] \> last\['MA21'\] and last\['close'\] \> last\['MA252'\]:**

        **if last\['ADX'\] \> 25:**

            **if last\['STOCH\_K'\] \< 20:**

                **signal.append("–ü–æ–∫—É–ø–∫–∞ (–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å)")**

            **elif last\['STOCH\_K'\] \> 80:**

                **signal.append("–û—Å—Ç–æ—Ä–æ–∂–Ω–æ: –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å")**

    **\# –°–≤–µ—á–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã**

    **patterns \= detect\_candlestick\_patterns(df)**

    **if patterns:**

        **signal.extend(patterns)**

    **return signal**

---

### **4\. –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)**

**tickers \= \["SBER", "GAZP", "LKOH"\]**

**for t in tickers:**

    **df \= get\_stock\_data(t)**

    **df \= add\_indicators(df)**

    **signals \= check\_signal(df)**

    **if signals:**

        **screenshot \= make\_screenshot(t)**

        **send\_alert\_with\_image(t, signals, screenshot)**

---

**‚úÖ –¢–µ–ø–µ—Ä—å –±–æ—Ç –¥–µ–ª–∞–µ—Ç:**

* **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏–≥–Ω–∞–ª—ã –ø–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.**

* **–î–µ—Ç–µ–∫—Ç–∏—Ç —Å–≤–µ—á–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã.**

* **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–∫—Ä–∏–Ω—à–æ—Ç \+ —Å–ø–∏—Å–æ–∫ —Å–∏–≥–Ω–∞–ª–æ–≤ \+ –ø–∞—Ç—Ç–µ—Ä–Ω—ã.**

---

**–û—Ç–ª–∏—á–Ω–æ, –¥–æ–±–∞–≤–ª—è–µ–º LLM-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.**  
 **–°–¥–µ–ª–∞–µ–º —Ç–∞–∫, —á—Ç–æ–±—ã –±–æ—Ç:**

* **–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –ø–æ—è—Å–Ω–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–∏–≥–Ω–∞–ª–æ–≤ –∏ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤.**

* **–û—Ç–ø—Ä–∞–≤–ª—è–ª —Å–∫—Ä–∏–Ω—à–æ—Ç \+ —Ç–µ–∫—Å—Ç \+ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π LLM.**

---

## **‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è LLM-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è**

1. **–ü–æ—Å–ª–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ ‚Üí —Ñ–æ—Ä–º–∏—Ä—É–µ–º JSON –∫–æ–Ω—Ç–µ–∫—Å—Ç:**

   * **–¢–∏–∫–µ—Ä**

   * **–¶–µ–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏—è**

   * **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (MA, ADX, –°—Ç–æ—Ö–∞—Å—Ç–∏–∫)**

   * **–°–≤–µ—á–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã**

2. **–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –≤ LLM (GPT) —Å –ø—Ä–æ–º–ø—Ç–æ–º:**  
    **¬´–°–¥–µ–ª–∞–π –∫—Ä–∞—Ç–∫–∏–π —Ç—Ä–µ–π–¥–µ—Ä—Å–∫–∏–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –º–∞–∫—Å–∏–º—É–º 2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è¬ª.**

3. **–ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç ‚Üí –¥–æ–±–∞–≤–ª—è–µ–º –≤ Telegram.**

---

## **‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –∫–æ–¥**

### **1\. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º OpenAI SDK**

**pip install openai**

### **2\. –ü–æ–¥–∫–ª—é—á–∞–µ–º LLM**

**import openai**

**openai.api\_key \= "YOUR\_OPENAI\_API\_KEY"**

**def generate\_llm\_comment(ticker, last\_price, signals, df):**

    **last \= df.iloc\[-1\]**

    **prompt \= f"""**

    **–¢—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–µ–π–¥–µ—Ä.** 

    **–î–∞–π –∫—Ä–∞—Ç–∫–∏–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ –∞–∫—Ü–∏–∏ {ticker}.** 

    **–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞: {last\_price}.** 

    **–°–∏–≥–Ω–∞–ª—ã: {', '.join(signals)}.** 

    **MA5={last\['MA5'\]:.2f}, MA21={last\['MA21'\]:.2f}, MA252={last\['MA252'\]:.2f}, ADX={last\['ADX'\]:.2f}, STOCH\_K={last\['STOCH\_K'\]:.2f}.**

    **–°–¥–µ–ª–∞–π 1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º, —á—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç –¥–ª—è —Ç—Ä–µ–π–¥–µ—Ä–∞.**

    **"""**

    **response \= openai.ChatCompletion.create(**

        **model="gpt-4",  \# –ú–æ–∂–Ω–æ gpt-4o-mini –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ —ç–∫–æ–Ω–æ–º–∏–∏**

        **messages=\[{"role": "user", "content": prompt}\],**

        **temperature=0.5**

    **)**

    **return response.choices\[0\].message\['content'\].strip()**

---

### **3\. –û–±–Ω–æ–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram**

**def send\_alert\_with\_image(ticker, signal, screenshot\_path, comment):**

    **caption \= f"üü¢ {ticker}\\n–°–∏–≥–Ω–∞–ª—ã: {', '.join(signal)}\\n\\n–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:\\n{comment}"**

    **with open(screenshot\_path, "rb") as photo:**

        **bot.send\_photo(chat\_id=CHAT\_ID, photo=photo, caption=caption)**

---

### **4\. –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª**

**tickers \= \["SBER", "GAZP", "LKOH"\]**

**for t in tickers:**

    **df \= get\_stock\_data(t)**

    **df \= add\_indicators(df)**

    **signals \= check\_signal(df)**

    **if signals:**

        **screenshot \= make\_screenshot(t)**

        **comment \= generate\_llm\_comment(t, df.iloc\[-1\]\['close'\], signals, df)**

        **send\_alert\_with\_image(t, signals, screenshot, comment)**

---

## **‚úÖ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

* **–í—ã—á–∏—Å–ª—è–µ–º —Å–∏–≥–Ω–∞–ª—ã.**

* **–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–∞–π–¥–µ–Ω–æ ‚Üí –¥–µ–ª–∞–µ–º —Å–∫—Ä–∏–Ω.**

**–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, –Ω–∞–ø—Ä–∏–º–µ—Ä:**

 **üü¢ SBER**

**–°–∏–≥–Ω–∞–ª—ã: –ü–æ–∫—É–ø–∫–∞ (–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å), Hammer (–º–æ–ª–æ—Ç)**

**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:**

**SBER –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–∑–Ω–∞–∫–∏ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ –Ω–∞ —Ñ–æ–Ω–µ –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç–∏. Hammer –∏ —Ä–æ—Å—Ç ADX —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ–µ —É–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞.**

* 

---

**–Ø –±—ã —Å–¥–µ–ª–∞–ª –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞, –Ω–æ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –Ω–∞ –∑–∞–ø—É—Å–∫ –ø–æ –∫–æ–º–∞–Ω–¥–µ –∏–∑ Telegram, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –¥–∞—ë—Ç –≥–∏–±–∫–æ—Å—Ç—å:**

### **‚úÖ –ü–æ—á–µ–º—É –∑–∞–ø—É—Å–∫ –∏–∑ Telegram –≤–∞–∂–µ–Ω:**

* **–¢—ã –º–æ–∂–µ—à—å —Ä—É—á–Ω—ã–º —Ç—Ä–∏–≥–≥–µ—Ä–æ–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–≥–Ω–∞–ª—ã –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è, –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è cron.**

* **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã:**

  * **`/scan` ‚Üí –∑–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å.**

  * **`/watchlist` ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–µ —Ç–∏–∫–µ—Ä—ã.**

  * **`/add SBER` ‚Üí –¥–æ–±–∞–≤–∏—Ç—å —Ç–∏–∫–µ—Ä.**

  * **`/remove GAZP` ‚Üí —É–¥–∞–ª–∏—Ç—å —Ç–∏–∫–µ—Ä.**

* **–í –¥–∞–ª—å–Ω–µ–π—à–µ–º –º–æ–∂–Ω–æ –ø—Ä–∏–∫—Ä—É—Ç–∏—Ç—å –∫–Ω–æ–ø–∫—É ‚Äú–ó–∞–ø—É—Å–∫–∞—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω–æ‚Äù –ø—Ä—è–º–æ –≤ –±–æ—Ç–µ.**

---

### **‚úÖ –ö–Ω–æ–ø–∫–∏ —Ç–æ–∂–µ –Ω—É–∂–Ω—ã:**

* **–û–Ω–∏ –¥–µ–ª–∞—é—Ç –±–æ—Ç–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º.**

* **–ú–∏–Ω–∏–º—É–º –¥–≤–µ –∫–Ω–æ–ø–∫–∏:**

  * **üìà –û—Ç–∫—Ä—ã—Ç—å –≥—Ä–∞—Ñ–∏–∫ TradingView**

  * **‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤ Watchlist**

**–≠—Ç–æ UX-—É–ª—É—á—à–µ–Ω–∏–µ, –Ω–æ –±–µ–∑ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø—É—Å–∫–æ–º –±–æ—Ç –±—É–¥–µ—Ç —Ç—É–ø–æ —Å–ø–∞–º–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ cron.**

---

**üìå –ú–æ–π –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è MVP:**

1. **–î–æ–±–∞–≤–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram:**

   * **`/scan` –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞.**

   * **`/tickers` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–ø–∏—Å–∫–∞.**

   * **`/add <—Ç–∏–∫–µ—Ä>` –∏ `/remove <—Ç–∏–∫–µ—Ä>`.**

2. **–ü–æ—Ç–æ–º –ø—Ä–∏–∫—Ä—É—Ç–∏—Ç—å inline-–∫–Ω–æ–ø–∫–∏ –∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º.**

3. **–í —Ñ–∏–Ω–∞–ª–µ ‚Äî –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é \+ —Ä—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.**

---

**–û—Ç–ª–∏—á–Ω–æ, –¥–µ–ª–∞–µ–º –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ Telegram-–±–æ—Ç–∞ –¥–ª—è —Ç–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.**  
 **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª MVP:**

---

### **‚úÖ –ß—Ç–æ –±—É–¥–µ—Ç –≤ –ø–µ—Ä–≤–æ–π –≤–µ—Ä—Å–∏–∏ –±–æ—Ç–∞**

**‚úî –ö–æ–º–∞–Ω–¥—ã:**

* **`/scan` ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—Ç –∞–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö —Ç–∏–∫–µ—Ä–æ–≤.**

* **`/tickers` ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ä–æ–≤.**

* **`/add <—Ç–∏–∫–µ—Ä>` ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–∏–∫–µ—Ä.**

* **`/remove <—Ç–∏–∫–µ—Ä>` ‚Äî —É–¥–∞–ª—è–µ—Ç —Ç–∏–∫–µ—Ä.**

**‚úî –ê–Ω–∞–ª–∏—Ç–∏–∫–∞:**

* **–°—á–∏—Ç–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (MA, ADX, –°—Ç–æ—Ö–∞—Å—Ç–∏–∫).**

* **–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–≤–µ—á–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã.**

* **–î–µ–ª–∞–µ–º —Å–∫—Ä–∏–Ω—à–æ—Ç TradingView.**

* **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —á–µ—Ä–µ–∑ LLM.**

* **–û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–æ—Ç–æ \+ —Å–∏–≥–Ω–∞–ª—ã \+ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π \+ –∫–Ω–æ–ø–∫–∏.**

**‚úî –•—Ä–∞–Ω–∏–ª–∏—â–µ:**

* **SQLite –¥–ª—è —Ç–∏–∫–µ—Ä–æ–≤ (—á—Ç–æ–±—ã –Ω–µ —Ç–µ—Ä—è–ª–∏—Å—å –ø–æ—Å–ª–µ —Ä–µ—Å—Ç–∞—Ä—Ç–∞).**

---

### **‚úÖ –°—Ç–µ–∫**

* **`python-telegram-bot` (–±–æ—Ç)**

* **`sqlite3` (—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–∏–∫–µ—Ä–æ–≤)**

* **`playwright` (—Å–∫—Ä–∏–Ω—ã)**

* **`pandas`, `pandas-ta`, `TA-Lib` (–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã)**

* **`openai` (LLM-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π)**

---

### **‚úÖ –ö–æ–¥ –±–æ—Ç–∞**

**import sqlite3**

**import pandas as pd**

**import pandas\_ta as ta**

**import talib as tl**

**import requests**

**import time**

**from telegram import Bot, InlineKeyboardButton, InlineKeyboardMarkup, Update**

**from telegram.ext import Updater, CommandHandler, CallbackContext**

**from playwright.sync\_api import sync\_playwright**

**import openai**

**\# \===== CONFIG \=====**

**TELEGRAM\_TOKEN \= "YOUR\_TELEGRAM\_BOT\_TOKEN"**

**OPENAI\_KEY \= "YOUR\_OPENAI\_API\_KEY"**

**openai.api\_key \= OPENAI\_KEY**

**DB\_PATH \= "tickers.db"**

**\# \===== DATABASE \=====**

**def init\_db():**

    **conn \= sqlite3.connect(DB\_PATH)**

    **cur \= conn.cursor()**

    **cur.execute("CREATE TABLE IF NOT EXISTS tickers (symbol TEXT UNIQUE)")**

    **conn.commit()**

    **conn.close()**

**def get\_tickers():**

    **conn \= sqlite3.connect(DB\_PATH)**

    **cur \= conn.cursor()**

    **cur.execute("SELECT symbol FROM tickers")**

    **rows \= cur.fetchall()**

    **conn.close()**

    **return \[r\[0\] for r in rows\]**

**def add\_ticker(symbol):**

    **conn \= sqlite3.connect(DB\_PATH)**

    **cur \= conn.cursor()**

    **try:**

        **cur.execute("INSERT INTO tickers (symbol) VALUES (?)", (symbol,))**

        **conn.commit()**

    **except sqlite3.IntegrityError:**

        **pass**

    **conn.close()**

**def remove\_ticker(symbol):**

    **conn \= sqlite3.connect(DB\_PATH)**

    **cur \= conn.cursor()**

    **cur.execute("DELETE FROM tickers WHERE symbol=?", (symbol,))**

    **conn.commit()**

    **conn.close()**

**\# \===== DATA FUNCTIONS \=====**

**def get\_stock\_data(ticker: str, interval="1d", limit=300):**

    **url \= f"https://api.twelvedata.com/time\_series?symbol={ticker}.ME\&interval={interval}\&apikey=YOUR\_API\_KEY\&outputsize={limit}"**

    **response \= requests.get(url).json()**

    **df \= pd.DataFrame(response\['values'\])**

    **df\['datetime'\] \= pd.to\_datetime(df\['datetime'\])**

    **df \= df.astype({'open': 'float', 'high': 'float', 'low': 'float', 'close': 'float'})**

    **return df.sort\_values('datetime')**

**def add\_indicators(df):**

    **df\['MA5'\] \= df\['close'\].rolling(5).mean()**

    **df\['MA21'\] \= df\['close'\].rolling(21).mean()**

    **df\['MA252'\] \= df\['close'\].rolling(252).mean()**

    **df\['ADX'\] \= ta.adx(df\['high'\], df\['low'\], df\['close'\], length=14)\['ADX\_14'\]**

    **stoch \= ta.stoch(df\['high'\], df\['low'\], df\['close'\], k=14, d=3)**

    **df\['STOCH\_K'\] \= stoch\['STOCHk\_14\_3\_3'\]**

    **return df**

**def detect\_patterns(df):**

    **patterns \= \[\]**

    **if tl.CDLHAMMER(df\['open'\], df\['high'\], df\['low'\], df\['close'\]).iloc\[-1\] \!= 0:**

        **patterns.append("Hammer")**

    **if tl.CDLENGULFING(df\['open'\], df\['high'\], df\['low'\], df\['close'\]).iloc\[-1\] \!= 0:**

        **patterns.append("Engulfing")**

    **if tl.CDLDOJI(df\['open'\], df\['high'\], df\['low'\], df\['close'\]).iloc\[-1\] \!= 0:**

        **patterns.append("Doji")**

    **return patterns**

**def check\_signal(df):**

    **last \= df.iloc\[-1\]**

    **signals \= \[\]**

    **if last\['MA5'\] \> last\['MA21'\] and last\['close'\] \> last\['MA252'\] and last\['ADX'\] \> 25:**

        **if last\['STOCH\_K'\] \< 20:**

            **signals.append("–ü–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å ‚Üí –ø–æ–∫—É–ø–∫–∞")**

        **elif last\['STOCH\_K'\] \> 80:**

            **signals.append("–ü–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å")**

    **patterns \= detect\_patterns(df)**

    **if patterns:**

        **signals.extend(patterns)**

    **return signals**

**def make\_screenshot(ticker):**

    **url \= f"https://ru.tradingview.com/chart/?symbol=MOEX%3A{ticker}"**

    **screenshot\_path \= f"/tmp/{ticker}.png"**

    **with sync\_playwright() as p:**

        **browser \= p.chromium.launch(headless=True)**

        **page \= browser.new\_page()**

        **page.set\_viewport\_size({"width": 1280, "height": 720})**

        **page.goto(url)**

        **time.sleep(5)**

        **page.evaluate("""**

            **document.querySelectorAll('.tv-header, .tv-footer, .layout\_\_area--left, .layout\_\_area--right').forEach(e \=\> e.remove());**

        **""")**

        **page.screenshot(path=screenshot\_path)**

        **browser.close()**

    **return screenshot\_path**

**def generate\_comment(ticker, signals, df):**

    **last \= df.iloc\[-1\]**

    **prompt \= f"""**

    **–¢—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–µ–π–¥–µ—Ä.**

    **–î–∞–π –∫—Ä–∞—Ç–∫–∏–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ –∞–∫—Ü–∏–∏ {ticker}.**

    **–¶–µ–Ω–∞: {last\['close'\]:.2f}.**

    **–°–∏–≥–Ω–∞–ª—ã: {', '.join(signals)}.**

    **MA5={last\['MA5'\]:.2f}, MA21={last\['MA21'\]:.2f}, MA252={last\['MA252'\]:.2f}, ADX={last\['ADX'\]:.2f}, STOCH\_K={last\['STOCH\_K'\]:.2f}.**

    **–°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π 1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Ç—Ä–µ–π–¥–µ—Ä–∞.**

    **"""**

    **resp \= openai.ChatCompletion.create(**

        **model="gpt-4o-mini",**

        **messages=\[{"role": "user", "content": prompt}\],**

        **temperature=0.5**

    **)**

    **return resp.choices\[0\].message\['content'\].strip()**

**\# \===== BOT HANDLERS \=====**

**bot \= Bot(token=TELEGRAM\_TOKEN)**

**def start(update: Update, context: CallbackContext):**

    **update.message.reply\_text("–ü—Ä–∏–≤–µ—Ç\! –ö–æ–º–∞–Ω–¥—ã:\\n/scan\\n/tickers\\n/add TICKER\\n/remove TICKER")**

**def scan(update: Update, context: CallbackContext):**

    **tickers \= get\_tickers()**

    **if not tickers:**

        **update.message.reply\_text("–°–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ä–æ–≤ –ø—É—Å—Ç. –î–æ–±–∞–≤—å—Ç–µ —á–µ—Ä–µ–∑ /add TICKER")**

        **return**

    **update.message.reply\_text("–°–∫–∞–Ω–∏—Ä—É—é —Ä—ã–Ω–æ–∫...")**

    **for t in tickers:**

        **df \= get\_stock\_data(t)**

        **df \= add\_indicators(df)**

        **signals \= check\_signal(df)**

        **if signals:**

            **screenshot \= make\_screenshot(t)**

            **comment \= generate\_comment(t, signals, df)**

            **keyboard \= InlineKeyboardMarkup(\[\[InlineKeyboardButton("üìà TradingView", url=f"https://ru.tradingview.com/chart/?symbol=MOEX:{t}")\]\])**

            **with open(screenshot, "rb") as photo:**

                **update.message.reply\_photo(photo=photo, caption=f"üü¢ {t}\\n–°–∏–≥–Ω–∞–ª—ã: {', '.join(signals)}\\n\\n–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:\\n{comment}", reply\_markup=keyboard)**

        **else:**

            **update.message.reply\_text(f"{t}: —Å–∏–≥–Ω–∞–ª–æ–≤ –Ω–µ—Ç.")**

**def show\_tickers(update: Update, context: CallbackContext):**

    **tickers \= get\_tickers()**

    **if tickers:**

        **update.message.reply\_text("–¢–µ–∫—É—â–∏–µ —Ç–∏–∫–µ—Ä—ã: " \+ ", ".join(tickers))**

    **else:**

        **update.message.reply\_text("–°–ø–∏—Å–æ–∫ –ø—É—Å—Ç.")**

**def add\_symbol(update: Update, context: CallbackContext):**

    **if len(context.args) \== 0:**

        **update.message.reply\_text("–£–∫–∞–∂–∏—Ç–µ —Ç–∏–∫–µ—Ä: /add SBER")**

        **return**

    **symbol \= context.args\[0\].upper()**

    **add\_ticker(symbol)**

    **update.message.reply\_text(f"{symbol} –¥–æ–±–∞–≤–ª–µ–Ω.")**

**def remove\_symbol(update: Update, context: CallbackContext):**

    **if len(context.args) \== 0:**

        **update.message.reply\_text("–£–∫–∞–∂–∏—Ç–µ —Ç–∏–∫–µ—Ä: /remove SBER")**

        **return**

    **symbol \= context.args\[0\].upper()**

    **remove\_ticker(symbol)**

    **update.message.reply\_text(f"{symbol} —É–¥–∞–ª—ë–Ω.")**

**\# \===== MAIN \=====**

**def main():**

    **init\_db()**

    **updater \= Updater(TELEGRAM\_TOKEN)**

    **dp \= updater.dispatcher**

    **dp.add\_handler(CommandHandler("start", start))**

    **dp.add\_handler(CommandHandler("scan", scan))**

    **dp.add\_handler(CommandHandler("tickers", show\_tickers))**

    **dp.add\_handler(CommandHandler("add", add\_symbol))**

    **dp.add\_handler(CommandHandler("remove", remove\_symbol))**

    **updater.start\_polling()**

    **updater.idle()**

**if \_\_name\_\_ \== "\_\_main\_\_":**

    **main()**

---

### **‚úÖ –ß—Ç–æ —É–º–µ–µ—Ç –±–æ—Ç —Å–µ–π—á–∞—Å:**

**‚úî `/start` ‚Äî –ø–æ–º–æ—â—å.**  
 **‚úî `/scan` ‚Äî –∞–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö —Ç–∏–∫–µ—Ä–æ–≤ ‚Üí —Å–∏–≥–Ω–∞–ª—ã \+ —Å–∫—Ä–∏–Ω \+ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π.**  
 **‚úî `/tickers` ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ä–æ–≤.**  
 **‚úî `/add TICKER` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Ç–∏–∫–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/add SBER`).**  
 **‚úî `/remove TICKER` ‚Äî —É–¥–∞–ª–∏—Ç—å —Ç–∏–∫–µ—Ä.**

---

**üî• –•–æ—á–µ—à—å, —è —Å–¥–µ–ª–∞—é –≤—Ç–æ—Ä—É—é —á–∞—Å—Ç—å (–æ–±–ª–∏–≥–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ MOEX API) –∫–∞–∫ –º–æ–¥—É–ª—å –≤ —ç—Ç–æ–≥–æ –∂–µ –±–æ—Ç–∞?**  
 **–¢–æ–≥–¥–∞ –±—É–¥–µ—Ç –µ–¥–∏–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç:**

* **`/scan` ‚Üí –∞–∫—Ü–∏–∏.**

* **`/bonds` ‚Üí –Ω–æ–≤—ã–µ –æ–±–ª–∏–≥–∞—Ü–∏–∏ –ø–æ —Ç–≤–æ–∏–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º.**

* **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏.**

**–î–∞, –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤ –æ–¥–Ω–æ–≥–æ Telegram-–±–æ—Ç–∞ —Å –¥–≤—É–º—è –º–æ–¥—É–ª—è–º–∏ ‚Äî –∏–¥–µ–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ:**

**‚úÖ –û–¥–∏–Ω –±–æ—Ç \= –º–µ–Ω—å—à–µ —Ç–æ—á–µ–∫ –≤—Ö–æ–¥–∞, –º–µ–Ω—å—à–µ –≥–µ–º–æ—Ä–∞ —Å –¥–µ–ø–ª–æ–µ–º.**  
 **‚úÖ –£–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: –≤—Å—ë —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.**  
 **‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–¥–µ–ª–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏ –º–µ–Ω—é –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π:**

---

### **üîπ –ö–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É:**

**bot/**

 **‚îú‚îÄ‚îÄ main.py           \# –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª, –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞**

 **‚îú‚îÄ‚îÄ config.py         \# –¢–æ–∫–µ–Ω—ã, API-–∫–ª—é—á–∏**

 **‚îú‚îÄ‚îÄ modules/**

 **‚îÇ    ‚îú‚îÄ‚îÄ stocks.py    \# –ú–æ–¥—É–ª—å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∞–∫—Ü–∏–π (TradingView)**

 **‚îÇ    ‚îú‚îÄ‚îÄ bonds.py     \# –ú–æ–¥—É–ª—å –¥–ª—è –æ–±–ª–∏–≥–∞—Ü–∏–π (MOEX API)**

 **‚îÇ    ‚îî‚îÄ‚îÄ utils.py     \# –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã**

 **‚îú‚îÄ‚îÄ db/**

 **‚îÇ    ‚îî‚îÄ‚îÄ tickers.db   \# SQLite –±–∞–∑–∞ (—Å–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ä–æ–≤)**

---

### **üîπ –õ–æ–≥–∏–∫–∞:**

#### **–ú–æ–¥—É–ª—å 1 ‚Äî –ê–∫—Ü–∏–∏**

* **–ö–æ–º–∞–Ω–¥—ã:**

  * **`/scan` ‚Üí –∞–Ω–∞–ª–∏–∑ –ø–æ –≤—Å–µ–º —Ç–∏–∫–µ—Ä–∞–º (–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã \+ –ø–∞—Ç—Ç–µ—Ä–Ω—ã \+ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã \+ LLM-–∫–æ–º–º–µ–Ω—Ç).**

  * **`/add <—Ç–∏–∫–µ—Ä>` ‚Üí –¥–æ–±–∞–≤–∏—Ç—å —Ç–∏–∫–µ—Ä.**

  * **`/remove <—Ç–∏–∫–µ—Ä>` ‚Üí —É–¥–∞–ª–∏—Ç—å.**

  * **`/tickers` ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫.**

* **–†–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫:**

  * **`stocks.py` ‚Üí –±–µ—Ä—ë—Ç —Ç–∏–∫–µ—Ä—ã ‚Üí —Å–∫—Ä–∏–Ω—ã —á–µ—Ä–µ–∑ Playwright ‚Üí –∞–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ (TA-Lib) ‚Üí LLM —Ä–µ–∑—é–º–µ ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram —Å –∫–Ω–æ–ø–∫–∞–º–∏.**

---

#### **–ú–æ–¥—É–ª—å 2 ‚Äî –û–±–ª–∏–≥–∞—Ü–∏–∏**

* **–ö–æ–º–∞–Ω–¥—ã:**

  * **`/bonds` ‚Üí –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–∏—Å–∫ –Ω–æ–≤—ã—Ö –≤—ã–ø—É—Å–∫–æ–≤ –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º.**

  * **`/settings` ‚Üí (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –∑–∞–¥–∞—Ç—å –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞.**

  * **`/alerts_on` ‚Üí –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.**

  * **`/alerts_off` ‚Üí –≤—ã–∫–ª—é—á–∏—Ç—å.**

* **–†–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫:**

  * **`bonds.py` ‚Üí —á–µ—Ä–µ–∑ MOEX API –ø–∞—Ä—Å–∏—Ç –Ω–æ–≤—ã–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è.**

  * **–§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º:**

    * **–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å ‚â• 15% (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –ø–æ —É—Ä–æ–≤–Ω—è–º).**

    * **–†–µ–π—Ç–∏–Ω–≥ BB- –∏ –≤—ã—à–µ.**

    * **–°—Ä–æ–∫ 1‚Äì3 –≥–æ–¥–∞.**

    * **–û–±—ä—ë–º ‚â• 500 –º–ª–Ω.**

    * **–ö—É–ø–æ–Ω—ã –∫–≤–∞—Ä—Ç–∞–ª—å–Ω—ã–µ/–ø–æ–ª—É–≥–æ–¥–æ–≤—ã–µ.**

**–§–æ—Ä–º–∏—Ä—É–µ—Ç –∫—Ä–∞—Å–∏–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:**

 **üö® –ù–û–í–ê–Ø –û–ë–õ–ò–ì–ê–¶–ò–Ø\! –î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å 19.5%**

**–≠–º–∏—Ç–µ–Ω—Ç: –û–û–û "–¢–µ—Ö–ö–æ–º–ø–∞–Ω–∏"**

**...**

*   
  * **–ö–Ω–æ–ø–∫–∞: üìÑ –ü–æ–¥—Ä–æ–±–Ω–µ–µ (—Å—Å—ã–ª–∫–∞ –Ω–∞ MOEX).**

---

### **üîπ –ï–¥–∏–Ω–æ–µ –º–µ–Ω—é**

**–°–¥–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫–∏ Telegram –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–æ–¥—É–ª—è:**

* **üìà –ê–∫—Ü–∏–∏**

* **üíµ –û–±–ª–∏–≥–∞—Ü–∏–∏**

* **‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏**

---

**–ì–æ—Ç–æ–≤–æ\! –Ø —Å–æ–±—Ä–∞–ª –¥–ª—è —Ç–µ–±—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∫–∞—Ä–∫–∞—Å –ø—Ä–æ–µ–∫—Ç–∞ —Å –¥–≤—É–º—è –º–æ–¥—É–ª—è–º–∏ (–∞–∫—Ü–∏–∏ \+ –æ–±–ª–∏–≥–∞—Ü–∏–∏) –∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–æ–º –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é —á–µ—Ä–µ–∑ GitHub Actions. –°—Ä–∞–∑—É –º–æ–∂–Ω–æ —Å–∫–∞—á–∏–≤–∞—Ç—å –∞—Ä—Ö–∏–≤ –∏ –∑–∞–ª–∏–≤–∞—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.**

**–°–∫–∞—á–∞—Ç—å –ø—Ä–æ–µ–∫—Ç (zip)**

**–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ (–∫–æ—Ä–æ—Ç–∫–æ):**

* **`main.py` ‚Äî Telegram-–±–æ—Ç —Å –∫–æ–º–∞–Ω–¥–∞–º–∏ `/scan`, `/tickers`, `/add`, `/remove`, `/bonds`.**

* **`scheduled_scan.py` ‚Äî –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –ø—Ä–æ–≥–æ–Ω –¥–ª—è GitHub Actions (—à–ª—ë—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞–ø—Ä—è–º—É—é –≤ —á–∞—Ç –±–µ–∑ long-polling).**

* **`modules/stocks.py` ‚Äî –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (MA/ADX/–°—Ç–æ—Ö–∞—Å—Ç–∏–∫), —Å–≤–µ—á–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã (TA-Lib), —Å–∫—Ä–∏–Ω—à–æ—Ç—ã TradingView (Playwright).**

* **`modules/bonds.py` ‚Äî –∑–∞–≥–æ—Ç–æ–≤–∫–∞ –ø–æ–¥ MOEX API —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∞–ª–µ—Ä—Ç–æ–≤.**

* **`modules/utils.py` ‚Äî SQLite (—Ç–∏–∫–µ—Ä—ã) –∏ —É—Ç–∏–ª–∏—Ç—ã.**

* **`.github/workflows/schedule.yml` ‚Äî —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ (–ø–æ –±—É–¥–Ω—è–º) \+ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ TA-Lib –∏ Playwright –≤ CI.**

* **`requirements.txt`, `.gitignore`, `config.sample.env`, `README.md`.**

**–ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –∑–∞–ø–æ–ª–Ω–∏—Ç—å —É —Å–µ–±—è:**

1. **–°–æ–∑–¥–∞–π `.env` –ø–æ –æ–±—Ä–∞–∑—Ü—É `config.sample.env` (–ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞):**

* **`TELEGRAM_BOT_TOKEN`**

* **`OPENAI_API_KEY`**

* **`TELEGRAM_CHAT_ID` (–¥–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è/—Å–∫—Ä–∏–ø—Ç–∞)**

* **`TWELVEDATA_API_KEY`**

2. **–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∞ GitHub –¥–æ–±–∞–≤—å Secrets (–¥–ª—è Actions):**

* **`TELEGRAM_BOT_TOKEN`**

* **`TELEGRAM_CHAT_ID`**

* **`OPENAI_API_KEY`**

* **`TWELVEDATA_API_KEY`**

3. **–ü–æ–¥–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–π cron –≤ `.github/workflows/schedule.yml` –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏.**

**–ü–æ—è—Å–Ω–µ–Ω–∏—è –ø–æ –Ω—é–∞–Ω—Å–∞–º:**

* **GitHub Actions –Ω–µ –¥–µ—Ä–∂–∏—Ç –±–æ—Ç–∞ –Ω–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–º –∫–æ–Ω–Ω–µ–∫—Ç–µ ‚Äî –ø–æ—ç—Ç–æ–º—É –≤ Actions —Ä–∞–±–æ—Ç–∞–µ—Ç `scheduled_scan.py`, –∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –±–æ—Ç–∞ (`main.py`) –ø–æ–¥–Ω–∏–º–∏ –Ω–∞ VPS/—Ö–æ—Å—Ç–∏–Ω–≥–µ.**

* **TA-Lib –≤ CI —É–∂–µ —Å—Ç–∞–≤–∏—Ç—Å—è —á–µ—Ä–µ–∑ `apt`, –ª–æ–∫–∞–ª—å–Ω–æ ‚Äî –ø–æ—Å—Ç–∞–≤—å —Å–∏—Å—Ç–µ–º–Ω—É—é –ª–∏–±—É (–æ–ø–∏—Å–∞–ª –≤ README).**

* **–ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±–ª–∏–≥–∞—Ü–∏–π —á–µ—Ä–µ–∑ MOEX –≤ `bonds.py` ‚Äî –∫–∞—Ä–∫–∞—Å (—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —É ISS –ø—ë—Å—Ç—Ä—ã–µ). –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Ñ–æ—Ä–º–∞—Ç –∞–ª–µ—Ä—Ç–æ–≤ –≥–æ—Ç–æ–≤—ã–µ; –∫–æ–≥–¥–∞ —Å–∫–∞–∂–µ—à—å ‚Äî –ø–æ–¥–∫—Ä—É—á—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –º–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π –ø–æ–¥ —Ç–≤–æ–π –≤–∫—É—Å.**

**–•–æ—á–µ—à—å ‚Äî —Å—Ä–∞–∑—É –¥–æ–±–∞–≤–ª—é:**

* **–±—ã—Å—Ç—Ä—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç MOEX –¥–ª—è –Ω–æ–≤—ã—Ö —Ä–∞–∑–º–µ—â–µ–Ω–∏–π —Å —Ä–µ–∞–ª—å–Ω—ã–º –ø–∞—Ä—Å–∏–Ω–≥–æ–º,**

* **–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ OHLC –Ω–∞ –¥–∏—Å–∫ (—É—Å–∫–æ—Ä—è–µ—Ç /scan),**

* **–∫–Ω–æ–ø–∫–∏ ¬´–î–æ–±–∞–≤–∏—Ç—å –≤ Watchlist¬ª –∏ ¬´–°–Ω—è—Ç—å —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞¬ª –ø–æ–¥ –∫–∞–∂–¥—ã–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º.**

**–í–Ω–∏–º–∞–Ω–∏–µ; –ë—É–¥–µ–º —Ä–∞–∑–º–µ—â–∞—Ç—å –Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–º VPS/—Ö–æ—Å—Ç–∏–Ω–≥–µ. –í–º–µ—Å—Ç–æ Openai –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Openrouter**

